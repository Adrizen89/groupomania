{"remainingRequest":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\src\\components\\Accueil\\Profil.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\src\\components\\Accueil\\Profil.vue","mtime":1614099097071},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBUb3BIZWFkZXIgZnJvbSAiLi9Ub3BIZWFkZXIiDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAiUHJvZmlsIiwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm57DQogICAgICAgICAgICBkaWFsb2dEZWw6IGZhbHNlLA0KICAgICAgICAgICAgZGlhbG9nVXA6IGZhbHNlLA0KICAgICAgICAgICAgbXNnOiAiIiwNCiAgICAgICAgICAgIGRhdGFHZXQ6IHsgDQogICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAiIiwNCiAgICAgICAgICAgICAgICBsYXN0TmFtZTogIiIsDQogICAgICAgICAgICAgICAgZW1haWw6ICIiDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZGF0YVVwOiB7DQogICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAiIiwNCiAgICAgICAgICAgICAgICBsYXN0TmFtZTogIiIsDQogICAgICAgICAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGRhdGFVcFM6ICIiLA0KICAgICAgICAgICAgdmFsaWQ6IHRydWUsDQogICAgICAgICAgICBmaXJzdE5hbWVSdWxlczogWw0KICAgICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdSZW5zZWlnbmV6IHZvdHJlIHByw6lub20nLA0KICAgICAgICAgICAgICAgIHYgPT4gL15bQS1aYS16XSskLy50ZXN0KHYpIHx8ICJWb3RyZSBwcsOpbm9tIG4nZXN0IHBhcyB2YWxpZGUiLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGxhc3ROYW1lUnVsZXM6IFsNCiAgICAgICAgICAgICAgICB2ID0+ICEhdiB8fCAnUmVuc2VpZ25leiB2b3RyZSBub20nLA0KICAgICAgICAgICAgICAgIHYgPT4gL15bQS1aYS16XSskLy50ZXN0KHYpIHx8ICJWb3RyZSBub20gbidlc3QgcGFzIHZhbGlkZSIsDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgZW1haWxSdWxlczogWw0KICAgICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdSZW5zZWlnbmV6IHZvdHJlIGUtbWFpbCcsDQogICAgICAgICAgICAgICAgdiA9PiAvLitALitcLi4rLy50ZXN0KHYpIHx8ICJWb3RyZSBlLW1haWwgbidlc3QgcGFzIHZhbGlkZSIsDQogICAgICAgICAgICBdLA0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIC8vc3VwcHJpbWVyIHByb2ZpbA0KICAgICAgICBkZWxldGVVc2VyKCkgew0KICAgICAgICAgICAgYXhpb3MuZGVsZXRlKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2F1dGgvIiwge2hlYWRlcnM6IHtBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UudG9rZW59fSkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgcmVwID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXApOw0KICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS51c2VySWQgPSAiIjsNCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UudG9rZW4gPSAiIjsNCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOyAgDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgICAgICAgdGhpcy5tc2cgPSBlcnJvciAgDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvL21vZGlmaWVyIGxlIHByb2ZpbA0KICAgICAgICB1cGRhdGVVc2VyKCkgew0KICAgICAgICAgICAgdGhpcy5kYXRhVXBTID0gSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhVXApOw0KICAgICAgICAgICAgYXhpb3MucHV0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2F1dGgvIiwgdGhpcy5kYXRhVXBTLCB7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS50b2tlbn19KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGxldCByZXAgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcCk7DQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dVcCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9BY2N1ZWlsL1Byb2ZpbCcpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgICAgICAgIHRoaXMubXNnID0gZXJyb3IgIA0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsgDQogICAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hdXRoLyIsIHtoZWFkZXJzOiB7QXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLnRva2VufX0pDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IHByb2ZpbCA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICAgICAgdGhpcy5kYXRhR2V0LmVtYWlsID0gcHJvZmlsWzBdLmVtYWlsOw0KICAgICAgICAgICAgICAgIHRoaXMuZGF0YUdldC5maXJzdE5hbWUgPSBwcm9maWxbMF0uZmlyc3ROYW1lOw0KICAgICAgICAgICAgICAgIHRoaXMuZGF0YUdldC5sYXN0TmFtZSA9IHByb2ZpbFswXS5sYXN0TmFtZTsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFVcC5lbWFpbCA9IHByb2ZpbFswXS5lbWFpbDsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFVcC5maXJzdE5hbWUgPSBwcm9maWxbMF0uZmlyc3ROYW1lOw0KICAgICAgICAgICAgICAgIHRoaXMuZGF0YVVwLmxhc3ROYW1lID0gcHJvZmlsWzBdLmxhc3ROYW1lOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgICAgfSk7ICAgIA0KICAgIH0sDQogICAgDQogICAgY29tcG9uZW50czogew0KICAgICAgICAidG9wLWhlYWRlciI6IFRvcEhlYWRlciwNCg0KICAgIH0NCn0NCg=="},{"version":3,"sources":["Profil.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"Profil.vue","sourceRoot":"src/components/Accueil","sourcesContent":["<template>\r\n    <div id=\"profil\" class=\"d-flex justify-center\">\r\n        <top-header/>\r\n        <v-card class=\"ma-12\" raised>\r\n            <v-img class=\"logo\" src=\"../../assets/logo.png\" width=\"100px\" contain></v-img>\r\n            <v-card-title class=\"my-3 justify-center\">\r\n                <h1 style=\"color:black\">Mon profil</h1>\r\n            </v-card-title>\r\n            <!-- Fenêtre du profil -->\r\n            <v-card-text class=\"ml-2 black--text\">\r\n                <p>Prénom : {{ dataGet.firstName }}</p>\r\n                <p>Nom : {{ dataGet.lastName }}</p>\r\n                <p>E-mail : {{ dataGet.email }}</p>\r\n            </v-card-text>\r\n\r\n            <!-- Boutons modifier et supprimer le profil -->\r\n            <v-card-actions class=\"d-flex justify-space-between\">\r\n                <v-btn @click.stop=\"dialogUp=true\" title=\"modifier mes informations\">Modifier</v-btn>\r\n                <v-btn @click.stop=\"dialogDel=true\" title=\"supprimer mon profil\" color=\"red\">Supprimer</v-btn>\r\n            </v-card-actions>\r\n        </v-card>\r\n\r\n        <!-- Fenêtre modifier profil -->  \r\n        <v-dialog persistent v-model=\"dialogUp\" max-width=\"600px\">\r\n            <v-card>\r\n                <v-card-title>Modifier mon profil</v-card-title>\r\n                <v-card-text>\r\n                    <v-form ref=\"form\" v-model=\"valid\">\r\n                        <v-text-field v-model=\"dataUp.firstName\" :rules=\"firstNameRules\" label=\"Prénom\" prepend-icon=\"mdi-account-outline\" color=\"black\" required></v-text-field>\r\n                        <v-text-field  v-model=\"dataUp.lastName\" :rules=\"lastNameRules\" label=\"Nom\" prepend-icon=\"mdi-account-outline\" color=\"black\" required></v-text-field>\r\n                        <v-text-field v-model=\"dataUp.email\" :rules=\"emailRules\" label=\"e-mail\" prepend-icon=\"mdi-at\" color=\"black\" required></v-text-field>\r\n                    </v-form>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-btn text @click=\"dialogUp=false\">Annuler</v-btn>\r\n                    <v-btn text :disabled=\"!valid\" @click=\"updateUser\">Valider</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n        <!-- Fenêtre confirmation de suppression -->\r\n        <v-dialog v-model=\"dialogDel\" max-width=\"350px\">\r\n            <v-card>\r\n                <v-card-title>\r\n                    Êtes-vous sûr.e ?\r\n                </v-card-title>\r\n                <v-card-text>\r\n                    <p>En supprimant votre profil, vous effacerez aussi tous vos posts ainsi que vos commentaires.</p>\r\n                    <p>{{ msg }}</p>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn text @click=\"dialogDel=false\">\r\n                        Annuler\r\n                    </v-btn>\r\n                    <v-btn text @click=\"deleteUser\">\r\n                        Supprimer mon profil\r\n                    </v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport TopHeader from \"./TopHeader\"\r\nimport axios from \"axios\"\r\n\r\nexport default {\r\n    name: \"Profil\",\r\n    data() {\r\n        return{\r\n            dialogDel: false,\r\n            dialogUp: false,\r\n            msg: \"\",\r\n            dataGet: { \r\n                firstName: \"\",\r\n                lastName: \"\",\r\n                email: \"\"\r\n            },\r\n            dataUp: {\r\n                firstName: \"\",\r\n                lastName: \"\",\r\n                email: \"\",\r\n            },\r\n            dataUpS: \"\",\r\n            valid: true,\r\n            firstNameRules: [\r\n                v => !!v || 'Renseignez votre prénom',\r\n                v => /^[A-Za-z]+$/.test(v) || \"Votre prénom n'est pas valide\",\r\n            ],\r\n            lastNameRules: [\r\n                v => !!v || 'Renseignez votre nom',\r\n                v => /^[A-Za-z]+$/.test(v) || \"Votre nom n'est pas valide\",\r\n            ],\r\n            emailRules: [\r\n                v => !!v || 'Renseignez votre e-mail',\r\n                v => /.+@.+\\..+/.test(v) || \"Votre e-mail n'est pas valide\",\r\n            ],\r\n        }\r\n    },\r\n    methods: {\r\n        //supprimer profil\r\n        deleteUser() {\r\n            axios.delete(\"http://localhost:3000/api/auth/\", {headers: {Authorization: 'Bearer ' + localStorage.token}})\r\n            .then(response => {\r\n                let rep = JSON.parse(response.data);\r\n                console.log(rep);\r\n                localStorage.userId = \"\";\r\n                localStorage.token = \"\";\r\n                this.$router.push('/');  \r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                this.msg = error  \r\n            })\r\n        },\r\n        //modifier le profil\r\n        updateUser() {\r\n            this.dataUpS = JSON.stringify(this.dataUp);\r\n            axios.put(\"http://localhost:3000/api/auth/\", this.dataUpS, {headers: {'Content-Type': 'application/json', Authorization: 'Bearer ' + localStorage.token}})\r\n            .then(response => {\r\n                let rep = JSON.parse(response.data);\r\n                console.log(rep);\r\n                this.dialogUp = false;\r\n                window.location.assign('http://localhost:8080/Accueil/Profil');\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                this.msg = error  \r\n            })\r\n        }\r\n    },\r\n    mounted() { \r\n        axios.get(\"http://localhost:3000/api/auth/\", {headers: {Authorization: 'Bearer ' + localStorage.token}})\r\n            .then(response => {\r\n                let profil = JSON.parse(response.data);\r\n                this.dataGet.email = profil[0].email;\r\n                this.dataGet.firstName = profil[0].firstName;\r\n                this.dataGet.lastName = profil[0].lastName;\r\n                this.dataUp.email = profil[0].email;\r\n                this.dataUp.firstName = profil[0].firstName;\r\n                this.dataUp.lastName = profil[0].lastName;\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });    \r\n    },\r\n    \r\n    components: {\r\n        \"top-header\": TopHeader,\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .logo{\r\n        margin-top: 5%;\r\n        margin-left: 30%;\r\n    }\r\n@media screen and (min-width: 200px) and (max-width: 640px) {\r\n  #profil {\r\n    padding-left: 10%;\r\n  }\r\n}\r\n</style>\r\n"]}]}