{"remainingRequest":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\src\\components\\Accueil\\FormPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\src\\components\\Accueil\\FormPost.vue","mtime":1612963897696},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adrie\\Documents\\GitHub\\groupomania\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFRvcEhlYWRlciBmcm9tICIuL1RvcEhlYWRlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRm9ybVBvc3QiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogdHJ1ZSwKICAgICAgdGl0bGVSdWxlczogW2Z1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuICEhdiB8fCAnVGl0cmUgZGUgbGEgcHVibGljYXRpb24nOwogICAgICB9LCBmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2ICYmIHYubGVuZ3RoIDw9IDUwIHx8ICdMZSB0aXRyZSBkb2l0IGZhaXJlIG1vaW5zIGRlIDUwIGNhcmFjdMOocmVzJzsKICAgICAgfV0sCiAgICAgIGNvbnRlbnRSdWxlczogW2Z1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuICEhdiB8fCAnRWNyaXZleiB2b3RyZSBtZXNzYWdlJzsKICAgICAgfV0sCiAgICAgIGRhdGFQb3N0OiB7CiAgICAgICAgdGl0bGU6ICIiLAogICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgIHVzZXJJZDogbG9jYWxTdG9yYWdlLnVzZXJJZAogICAgICB9LAogICAgICBkYXRhUG9zdFM6ICIiLAogICAgICBtc2c6IGZhbHNlLAogICAgICBtZXNzYWdlOiAiIiwKICAgICAgaW1hZ2U6IHVuZGVmaW5lZCwKICAgICAgaW1nVXJsOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHBhcnNlSW1nOiBmdW5jdGlvbiBwYXJzZUltZyhldnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMuaW1nVXJsID0gZS50YXJnZXQucmVzdWx0OwogICAgICB9OwoKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZXZ0KTsKICAgIH0sCiAgICBpbWFnZUlucHV0OiBmdW5jdGlvbiBpbWFnZUlucHV0KCkgewogICAgICB0aGlzLmZpbGUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF07CiAgICAgIHRoaXMuaW1nID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZpbGUpOwogICAgfSwKICAgIHNlbmRQb3N0OiBmdW5jdGlvbiBzZW5kUG9zdChldnQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgYm9keSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBib2R5LmFwcGVuZCgiZmlsZSIsIGV2dC50YXJnZXRbM10uZmlsZXNbMF0pOwogICAgICBib2R5LmFwcGVuZCgidGl0bGUiLCB0aGlzLmRhdGFQb3N0LnRpdGxlKTsKICAgICAgYm9keS5hcHBlbmQoImNvbnRlbnQiLCB0aGlzLmRhdGFQb3N0LmNvbnRlbnQpOwogICAgICBib2R5LmFwcGVuZCgidXNlcklkIiwgdGhpcy5kYXRhUG9zdC51c2VySWQpOwogICAgICB0aGlzLmRhdGFQb3N0UyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YVBvc3QpOwogICAgICBheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3RzLyIsIGJvZHksIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXAgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzMi5tZXNzYWdlID0gcmVwLm1lc3NhZ2U7CiAgICAgICAgX3RoaXMyLm1zZyA9IHRydWU7CiAgICAgICAgX3RoaXMyLmZvcm0gPSBmYWxzZTsKCiAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnL0FjY3VlaWwvRm9ydW0nKTsKCiAgICAgICAgaWYgKF90aGlzMi5pbWFnZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIGJvZHkuYXBwZW5kKCJmaWxlIiwgX3RoaXMyLmltYWdlKTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICBfdGhpczIubWVzc2FnZSA9IGVycm9yOwogICAgICAgIF90aGlzMi5tc2cgPSB0cnVlOwogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgICJ0b3AtaGVhZGVyIjogVG9wSGVhZGVyCiAgfQp9Ow=="},{"version":3,"sources":["FormPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,SAAA,MAAA,aAAA;AAGA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,UAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,yBAAA;AAAA,OADA,EAEA,UAAA,CAAA;AAAA,eAAA,CAAA,IAAA,CAAA,CAAA,MAAA,IAAA,EAAA,IAAA,4CAAA;AAAA,OAFA,CAFA;AAOA,MAAA,YAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,uBAAA;AAAA,OADA,CAPA;AAUA,MAAA,QAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA,YAAA,CAAA;AAHA,OAVA;AAeA,MAAA,SAAA,EAAA,EAfA;AAgBA,MAAA,GAAA,EAAA,KAhBA;AAiBA,MAAA,OAAA,EAAA,EAjBA;AAkBA,MAAA,KAAA,EAAA,SAlBA;AAmBA,MAAA,MAAA,EAAA;AAnBA,KAAA;AAqBA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,GADA,EACA;AAAA;;AACA,UAAA,MAAA,GAAA,IAAA,UAAA,EAAA;;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CAAA,MAAA,CAAA,MAAA;AACA,OAFA;;AAGA,MAAA,MAAA,CAAA,aAAA,CAAA,GAAA;AACA,KAPA;AAQA,IAAA,UARA,wBAQA;AACA,WAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,WAAA,GAAA,GAAA,GAAA,CAAA,eAAA,CAAA,KAAA,IAAA,CAAA;AACA,KAXA;AAaA,IAAA,QAbA,oBAaA,GAbA,EAaA;AAAA;;AACA,UAAA,IAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,MAAA,EAAA,GAAA,CAAA,MAAA,CAAA,CAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA,QAAA,CAAA,KAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA,QAAA,CAAA,OAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA,KAAA,QAAA,CAAA,MAAA;AACA,WAAA,SAAA,GAAA,IAAA,CAAA,SAAA,CAAA,KAAA,QAAA,CAAA;AAEA,MAAA,KAAA,CAAA,IAAA,CAAA,kCAAA,EACA,IADA,EAEA;AAAA,QAAA,OAAA,EACA;AAAA,0BAAA,kBAAA;AACA,UAAA,aAAA,EAAA,YAAA,YAAA,CAAA;AADA;AADA,OAFA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,YAAA,GAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,GAAA,CAAA,OAAA;AACA,QAAA,MAAA,CAAA,GAAA,GAAA,IAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,gBAAA;;AACA,YAAA,MAAA,CAAA,KAAA,IAAA,SAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,CAAA,MAAA,EAAA,MAAA,CAAA,KAAA;AACA;AACA,OAdA,WAiBA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,MAAA,CAAA,GAAA,GAAA,IAAA;AACA,OArBA;AAsBA;AA3CA,GAzBA;AAsEA,EAAA,UAAA,EAAA;AACA,kBAAA;AADA;AAtEA,CAAA","sourcesContent":["<template>\r\n    <v-app id=\"formPost\">\r\n        <top-header/>\r\n        <h1 class=\"ml-12\">Forum</h1>\r\n        <v-card class=\"ma-3 ml-12\">\r\n            <v-card-title class=\"mb-3\">\r\n                <h2>Nouveau post</h2>\r\n            </v-card-title>\r\n            \r\n            <v-card-text>\r\n                <v-form @submit.prevent=\"sendPost\" id=\"form\" ref=\"form\" class=\"ma-3\" v-model=\"valid\" >\r\n                    <v-text-field v-model=\"dataPost.title\" color=\"black\" :rules=\"titleRules\" :counter=\"50\" label=\"Titre\" autofocus required></v-text-field>\r\n                    <v-textarea v-model=\"dataPost.content\" color=\"black\" :rules=\"contentRules\" label=\"Message\" required></v-textarea>\r\n                    <v-file-input name=\"file\" accept=\"image/png, image/jpeg, image/jpg\" hide-input prepend-icon=\"mdi-image-plus\" v-model=\"image\" > </v-file-input>\r\n\r\n                </v-form>\r\n            </v-card-text>\r\n            \r\n\r\n            <v-card-actions>\r\n                \r\n                <v-btn form=\"form\" :disabled=\"!valid\" type=\"submit\" class=\"success\" >Poster</v-btn>\r\n                <v-btn text href=\"/Accueil/Forum\" color=\"black\">Annuler</v-btn>\r\n            </v-card-actions>\r\n            \r\n\r\n        </v-card>\r\n    </v-app>\r\n</template>\r\n<script>\r\nimport axios from \"axios\"\r\nimport TopHeader from \"./TopHeader\"\r\n\r\n\r\nexport default {\r\n    name: \"FormPost\",\r\n    data(){\r\n        return{\r\n            valid: true,\r\n            titleRules: [\r\n                v => !!v || 'Titre de la publication',\r\n                v => (v && v.length <= 50) || 'Le titre doit faire moins de 50 caractÃ¨res',\r\n\r\n            ],\r\n            contentRules: [\r\n                v => !!v || 'Ecrivez votre message',\r\n            ],\r\n            dataPost:{\r\n                title: \"\",\r\n                content:\"\",\r\n                userId: localStorage.userId\r\n            },\r\n            dataPostS: \"\",\r\n            msg: false,\r\n            message: \"\",\r\n            image: undefined,\r\n            imgUrl: \"\"\r\n        }\r\n    },\r\n    methods: {\r\n        parseImg(evt) {\r\n            var reader = new FileReader();\r\n            reader.onload = e => {\r\n                this.imgUrl = e.target.result;\r\n            };\r\n            reader.readAsDataURL(evt);\r\n        },\r\n        imageInput(){\r\n            this.file = this.$refs.file.files[0];\r\n            this.img = URL.createObjectURL(this.file);\r\n        },\r\n        \r\n        sendPost(evt){\r\n            let body = new FormData();\r\n            body.append(\"file\", evt.target[3].files[0]);\r\n            body.append(\"title\", this.dataPost.title);\r\n            body.append(\"content\", this.dataPost.content);\r\n            body.append(\"userId\", this.dataPost.userId);\r\n            this.dataPostS = JSON.stringify(this.dataPost);\r\n\r\n            axios.post(\"http://localhost:3000/api/posts/\", \r\n            body, \r\n            {headers: \r\n            {'Content-Type': 'application/json', \r\n            Authorization: 'Bearer ' + localStorage.token}})\r\n                .then(response => {\r\n                    let rep = response.data;\r\n                    this.message = rep.message;\r\n                    this.msg = true;\r\n                    this.form = false;\r\n                    this.$router.push('/Accueil/Forum');\r\n                    if (this.image != undefined) {\r\n                        body.append(\"file\", this.image);\r\n                    }\r\n                    },\r\n                    \r\n                )\r\n                .catch(error => {\r\n                    console.log(error); \r\n                    this.message = error;\r\n                    this.msg = true\r\n                });\r\n        },\r\n    },\r\n    components: {\r\n        \"top-header\": TopHeader, \r\n        \r\n    },\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n    .img {\r\n        &--inside {\r\n            width: 15%;\r\n            height: auto;\r\n        }\r\n    }\r\n</style>"],"sourceRoot":"src/components/Accueil"}]}